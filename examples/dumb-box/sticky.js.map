{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9dd5a55047c32f6041eb","webpack:///Sticky.js","webpack:///Wire.js","webpack:///Brick.js","webpack:///ports.js","webpack:///Port.js","webpack:///blockBuilder.js"],"names":[],"mappings":"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","file":"sticky.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"sticky\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"sticky\"] = factory();\n\telse\n\t\troot[\"sticky\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9dd5a55047c32f6041eb\n **/","import Wire from './Wire.js';\nimport Brick from './Brick.js';\n\nexport default class Sticky {\n  constructor(id) {\n    this.el = document.getElementById(id);\n    if(!this.el) throw \"Couldn't find element :(\";\n    let svg = Sticky.createElement('svg', { class: 'svg-content', viewBox: \"0 0 1000 600\", preserveAspectRatio: \"xMidYMid meet\" });\n    // let svg = Sticky.createElement('svg', { class: 'svg-content', width: 800, height: 400 });\n    this._uid = 0;\n    this._aux = {};\n    this._blocks = {};\n    this._objects = [];\n    this._wires = [];\n    this._state = null;\n\n    let lastDownTarget;\n\n    svg.addEventListener('mousedown', e => {\n      // lastDownTarget = svg;\n      if (e.target.type === 'wire') {\n        return this.selectedWire = e.target.wrapper;\n      }\n      if (e.target.type === 'port' && e.target.dir === 'out') {\n        return this.startAttach(e.target);\n      }\n\n      if (e.target.type === 'block' || e.target.type === 'title') {\n        this.dragging = e.target.parentNode;\n        var wrapper = this.dragging.wrapper;\n        var SVGbox = wrapper._svg.getBoundingClientRect();\n        var OffsetX = e.x - SVGbox.left;\n        var OffsetY =  e.y - SVGbox.top;\n        this._aux.mouseDown = { x: OffsetX - wrapper.x, y: OffsetY - wrapper.y };\n        this._svg.appendChild(this.dragging);\n        wrapper.wires.forEach(wire => this._svg.appendChild(wire._el));\n      }\n    }, false);\n\n\n    document.addEventListener('mousedown', e => {\n      // lastDownTarget = e.target;\n      // console.log(lastDownTarget);\n    }, false);\n\n    document.addEventListener('keydown', e => {\n      // if (lastDownTarget == svg) {\n        if (e.keyCode == 46) this.selectedWire.delete();\n      // }\n    }, false);\n\n    svg.addEventListener('keydown', e => {\n      console.log(e);\n    }, false);\n\n    svg.addEventListener('mouseup', e => {\n      this.dragging = null;\n      if(e.target.type === 'port')\n        return this.endAttach(e.target);\n\n      if(this.isState('attaching')) {\n        this.setState(null)\n        svg.removeChild(this._aux['wire']._el);\n      }\n    });\n\n    svg.addEventListener('mousemove', e => {\n      return this.attachMove(e);\n    });\n\n    svg.addEventListener('mousemove', e => {\n      if (this.dragging) {\n        var wrapper = this.dragging.wrapper;\n        var SVGbox = wrapper._svg.getBoundingClientRect();\n        var OffsetX = e.x - SVGbox.left;\n        var OffsetY =  e.y - SVGbox.top;\n\n        var firstState = this._aux.mouseDown;\n        wrapper.x = OffsetX - firstState.x;\n        wrapper.y = OffsetY - firstState.y;\n        wrapper.updateWires();\n      }\n    });\n\n    this._svg = svg;\n    this.el.appendChild(this._svg);\n\n    this.registerBlock('start', {\n      width: 35, height: 60, rx: 10, ry: 10, fill: '#AF2B37', ports: { data_in: 0, data_out: 0, flow_in: 0, flow_out: 1 },\n      title: '',\n      icon: 'img/icon.png',\n      behavior: () => 0\n    });\n    // this.registerBlock('actuator', ActuatorBrick);\n\n    this.clearCanvas();\n\n    this.colors = [\"#B8D430\", \"#3AB745\", \"#029990\", \"#3501CB\",\n                   \"#2E2C75\", \"#673A7E\", \"#CC0071\", \"#F80120\",\n                   \"#F35B20\", \"#FB9A00\", \"#FFCC00\", \"#FEF200\"];\n\n    return this;\n  }\n\n//static methods\n  static createElement(name, attrs) {\n    var el = document.createElementNS('http://www.w3.org/2000/svg', name);\n\n    for (let key in attrs) el.setAttribute(key, attrs[key]);\n\n    return el;\n  }\n  Brick(name, attrs) {\n    var el = Sticky.createElement(name, attrs);\n    var brick = new Brick(el, this);\n    brick._id = this._uid++;\n    this._objects.push(brick);\n\n    return brick;\n  }\n  addObj(obj) {\n    if (obj._id == null) obj._id = this._uid++;\n    this._objects.push(obj);\n    this.addElement(obj._el);\n  }\n  removeObj(obj, update) {\n    let index = this._objects.indexOf(obj);\n    if (index == -1) return;\n\n    for (let port_type of Object.keys(obj._ports)) {\n      if (obj._ports[port_type][0]) { // if there's any connection\n        for (let port of obj._ports[port_type]) {\n          // port.dettach(); \n\t}\n      }\n    }\n\n    for (let wire of obj.wires) {\n      wire.delete();\n    }\n    \n    this.removeElement(obj._el);\n    if (update)\n      return this._objects.splice(index, 1);\n  }\n  addElement(el) {\n    this._svg.appendChild(el);\n  }\n  removeElement(el) {\n    this._svg.removeChild(el);\n  }\n  startAttach(port) {\n    let wire = new Wire(port.wrapper);\n    wire._inverted = port.wrapper.dir === 'in';\n    this.setState('attaching');\n    this._aux['wire'] = wire;\n    this.addElement(wire._el);\n  }\n  startDrag(port) {\n    this.setState('attaching');\n    this._aux['wire'] = wire;\n    this.addElement(wire._el);\n  }\n  endAttach(port) {\n    if (this.isState('attaching')) {\n      this.setState(null);\n      var wire = this._aux['wire'];\n      wire._cp2 = port.wrapper;\n\n      if (wire.seal()) {\n        wire.render();\n        this._wires.push(wire);\n      } else {\n        this.removeElement(wire._el);\n      }\n      delete this._aux['wire'];\n    }\n  }\n  setState(state) {\n    return this._state = state;\n  }\n  isState(state) {\n    return this._state === state;\n  }\n  attachMove(mouse) {\n    if (this.isState('attaching')) {\n      var wire = this._aux['wire'];\n      var SVGbox = this._svg.getBoundingClientRect();\n      //(below) pixel for removing the wire from the way so we can detect the event on port\n      var offset = wire._inverted ? 1 : -1;\n      var mouse = { x: mouse.x - SVGbox.left + offset, y: mouse.y - SVGbox.top };\n      var port = wire._cp1.getPoint();\n\n      wire._render(port, mouse, wire._inverted);\n    }\n  }\n  clearCanvas(start = true) {\n    for (let obj of this._objects) {\n      // this.removeElement(obj._el);\n      this.removeObj(obj, false);\n    }\n\n    this._objects = [];\n\n    if (!start) return;\n\n    var start = this.createBlock('start');\n    start.x = 10; start.y = this._svg.getAttribute('height')/2;\n    start.behavior = () => 0;\n\n    this.addObj(start);\n  }\n  registerBlock(name, obj) {\n    this._blocks[name] = obj;\n    this._blocks[name].id = name;\n\n    if (obj.behavior && (typeof obj.behavior !== 'function')) {\n      this._blocks[name].behavior = new Function('findById', obj.behavior);\n    }\n  }\n  createBlock(name, data = {}) {\n    if (!this._blocks[name]) throw \"Block not registered\";\n    return Object.assign(new Brick(this._blocks[name]), data);\n  }\n  findById(id) {\n    if (id == undefined) return null;\n    for (let obj of this._objects) {\n      if (obj._id === id) return obj;\n    }\n  }\n  toJSON() {\n    var fluxgram = this._objects.map(obj => {\n      let object = {\n        refBlock: obj._refBlock,\n        id: obj._id,\n        x: obj.x,\n        y: obj.y,\n        ports: {} // flow_in, flow_out, in, out\n      };\n\n      for (let type in obj._ports) {\n        console.log(type, obj._ports[type]);\n        object.ports[type] = obj._ports[type].map(port => [...port._conn]);\n      }\n\n      return object;\n    });\n\n    // var refBlock = this._blocks.map(block => ({\n    //   // ...block,\n    //   behavior: block.behavior.toString\n    // }));\n\n    let refBlock = {};\n\n    return { refBlock, fluxgram };\n  }\n  loadJSON(data) {\n    this.clearCanvas(false);\n\n    for (let block of data) {\n      let refBlock = this._blocks[block.refBlock];\n      let obj = this.createBlock(block.refBlock, refBlock);\n      obj.x = block.x;\n      obj.y = block.y;\n      obj.value = block.value;\n      obj._id = block.id;\n      console.log(block.id, obj._id);\n      this.addObj(obj);\n    }\n\n    // load wires\n    // PLEASE REFACTORATE ME\n\n    for (let block of data) {\n      let blocky = this.findById(block.id);\n      console.log(blocky, block.id);\n\n      for (let port of block.ports.out) {\n\tif (!port[0]) {\n\t  console.log('end of flux');\n\t  break;\n\t}\n        let blocky2 = this.findById(port[0].brick);\n        let wire = new Wire(blocky._ports['out'][0], blocky2._ports['in'][port[0].id]);\n        this.addElement(wire._el);\n        if (wire.seal()) {\n          wire.render();\n          this._wires.push(wire);\n        } else {\n          this.removeElement(wire._el);\n        }\n      }\n\n      for (let port of block.ports.flow_out) {\n        console.log(port);\n\tif (!port[0]) {\n\t  console.log('end of flux');\n\t  break;\n\t}\n        let blocky2 = this.findById(port[0].brick);\n        let wire = new Wire(blocky._ports['flow_out'][0], blocky2._ports['flow_in'][0]);\n        this.addElement(wire._el);\n\n        if (wire.seal()) {\n          wire.render();\n          this._wires.push(wire);\n        } else {\n          this.removeElement(wire._el);\n        }\n      }\n\n    }\n  }\n  run() {\n    let block = this._objects[0], flow, id, refBlock;\n    console.log(block);\n\n    // flow = start.behavior();\n    // an ActuatorBrick should return the flow_out port id\n    // it'll be useful for if block\n\n    do {\n      refBlock = this._blocks[block._refBlock];\n      flow = refBlock.behavior.call(block, this.findById.bind(this));\n      // console.log(block._ports);\n      id = (block._ports['flow_out'][flow]._conn[0]) ?\n            (block._ports['flow_out'][flow]._conn[0]).brick :\n              null;\n      block = this.findById(id);\n      console.log(refBlock, flow, block);\n    } while(block);\n  }\n  compile() {\n\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** Sticky.js\n **/","//import Sticky from './Sticky.js';\n\nexport default function Wire(p1, p2) {\n  this._el = Sticky.createElement('path', { stroke: 'red', 'stroke-width': 6, fill: 'none', opacity: 0.8 });\n  this._el.type = 'wire';\n  this._el.wrapper = this;\n  this._cp1 = p1;\n  this._cp2 = p2;\n  this._inverted = false;\n  this._behavior = undefined;\n\n  return this;\n}\n\n//static methods\n\nWire.describeJoint = (x1, y1, x2, y2, offset) =>\n  [ \"M\", x1, y1,\n    \"C\", x1 + offset, y1, x2 - offset, y2, x2, y2\n  ].join(\" \");\n\nWire.dt2p = (x1, y1, x2, y2) => Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n\nWire.prototype = {\n  _render(p1, p2, inv) {\n    inv = inv ? -1 : 1;\n    var offset = Wire.dt2p(p1.x, p1.y, p2.x, p2.y)/2;\n    var d = Wire.describeJoint(p1.x, p1.y, p2.x, p2.y, offset*inv);\n    this._el.setAttribute('d', d);\n  },\n  seal() {\n    if(this._cp1.dir == this._cp2.dir) return false;\n    var wrapper1 = this._cp1._brick;\n    var wrapper2 = this._cp2._brick;\n\n    if(this._cp1.attach(this._cp2)) {\n      wrapper1.wires.push(this);\n      wrapper2.wires.push(this);\n      return true;\n    } else {\n      return false;\n    }\n\n  },\n  delete() {\n    var wrapper1 = this._cp1._brick;\n    var wrapper2 = this._cp2._brick;\n    spliceByIndex(wrapper1.wires, this);\n    spliceByIndex(wrapper2.wires, this);\n    this._cp1.dettach(this._cp2);\n    this._el.parentNode.removeChild(this._el);\n  },\n  render() {\n    this._render(this._cp1.getPoint(), this._cp2.getPoint(), this._inverted);\n  }\n\n};\n\n\nfunction spliceByIndex(arr, obj) {\n  let index = arr.indexOf(obj);\n  console.log(index);\n  if (index != -1) {\n    arr.splice(index, 1);\n    return true;\n  }\n  return false;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** Wire.js\n **/","import { DataPort, FlowPort } from './ports.js';\nimport blockBuilder from './blockBuilder.js';\n\nexport default function Brick({ behavior, title, ports, icon, gui, id, x, y }) {\n  this._el = blockBuilder(arguments[0]);\n  this._el.wrapper = this;\n\n  // this._id = id;\n  this.behavior = behavior;\n  this._container = null;\n  this._refBlock = id;\n  this.x = x || 0;\n  this.y = y || 0;\n\n  this._ports = {\n    in: [],\n    out: []\n  };\n\n  this.wires = [];\n\n  this._aux = { attaching: {} };\n  this._states = { dragging: false };\n\n  arrangePorts.call(this, ports);\n\n  return this;\n}\n\nBrick.prototype = {\n  get data () { return this.behavior(); },\n  get main() { return this._el.getElementById('main'); },\n  get _svg() { return getSvg(this._el); },\n  get x () { return this._el.getAttribute('x') * 1; }, // multiply by one just to convert from string to number\n  get y () { return this._el.getAttribute('y') * 1; }, //\n  get text () { return this._el.innerHTML; },\n  set x (val) { return this._el.setAttribute('x', val); },\n  set y (val) { return this._el.setAttribute('y', val); },\n  set text (val) { return (this._el.innerHTML = val); },\n\n  attr(key, value) {\n    if (value) return this._el.setAttribute(key, value);\n    else if (key) return this._el.getAttribute(key);\n  },\n  detach() {\n    this._el.parentNode.removeChild(this._el);\n    return this;\n  },\n  arrangePorts() {\n\n  },\n  updateWires() {\n    this.wires.forEach( wire => wire.render() );\n  },\n  getValue(id) {\n    // var args = this._\n    var args = [];\n    var In = this._ports.in;\n\n    for (let i = 0; i < In.length; i++) {\n      args.push([]);\n      for (let j = 0; j < In[i].length; j++)\n        args[i].push(In[i][j].value());\n    }\n\n    if (id) return (this._behavior(args))[id];\n    else    return this._behavior(args);\n  }\n};\n\nfunction getSvg(el) {\n  if(el.parentNode.nodeName === 'svg') {\n    return el.parentNode;\n  }\n  return getSvg(el.parentNode);\n}\n\nfunction arrangePorts({ data_in = 1, data_out = 1, flow_in = 1, flow_out = 1 } = {}) {\n  var radius = 10;\n  var dist = 10; //distance beetween ports\n  var strokeWidth = 3.5;\n  var ports = this._ports;\n  var main = this.main;\n  // var rectBox = main.getBBox ? main.getBBox() : main.getBoundingClientRect();\n  var rectBox =  main.getBoundingClientRect();\n  var maxPorts = Math.max(data_in + flow_in, data_out + flow_out);\n  // var maxPorts = Math.max(ports.in.length, ports.out.length);\n  var Radius = radius + strokeWidth/2; //total radius -> circle radius plus its stroke width\n  var tRadius = dist + Radius;\n  var height = (dist + Radius * 2) * maxPorts + dist; //dist + diameter * number of ports + final dist\n  var width = main.getAttribute('width') * 1;\n\n  this._ports.in = [];\n  this._ports.out = [];\n  this._ports.flow_in = [];\n  this._ports.flow_out = [];\n\n  main.setAttribute('height', height);\n\n  var attrs = { id: null, r: radius, fill: '#B8D430', stroke: 'black', 'stroke-width': strokeWidth };\n  var flow_attrs = { id: null, r: radius, fill: '#2549e4', stroke: 'black', 'stroke-width': strokeWidth };\n  var i, y, ds;\n  // attrs.cx = margin; attrs.cy = rectBox.height/2;\n\n  ds = height/(data_in + flow_in);\n  y = ds/2;\n\n  for (i = 0; i < flow_in; i++, y+=ds) {\n    let port = new FlowPort(i, 'in', this);\n    port.attr('cx', Radius);\n    port.attr('cy', y);\n    ports.flow_in.push(port);\n    this._el.appendChild(port._el);\n  }\n\n  for (i = 0; i < data_in; i++, y+=ds) {\n    let port = new DataPort(i, 'in', this);\n    port.attr('cx', Radius);\n    port.attr('cy', y);\n    ports.in.push(port);\n    this._el.appendChild(port._el);\n  }\n\n  ds = height/(data_out + flow_out);\n  y = ds/2; //initially get half the distance cuz we drawin a circle, then we increment by the total distance\n            //cuz it means the missing half for the current circle and the initial half for the next circle\n            //so every 'y' means one center of circle\n  for (i = 0; i < flow_out; i++, y+=ds) {\n    let port = new FlowPort(i, 'out', this);\n    port.attr('cx', width + Radius);\n    port.attr('cy', y);\n    ports.flow_out.push(port);\n    this._el.appendChild(port._el);\n  }\n\n  for (i = 0; i < data_out; i++, y+=ds) {\n    let port = new DataPort(i, 'out', this);\n    port.attr('cx', width + Radius);\n    port.attr('cy', y);\n    ports.out.push(port);\n    this._el.appendChild(port._el);\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** Brick.js\n **/","import Port from './Port.js';\n\nexport function DataPort(id, dir, brick) {\n  Port.call(this, { id, dir, brick, type: 'data' });\n\n  var opts = { fill: '#B8D43' };\n\n  return this;\n}\n\nDataPort.prototype = {\n  __proto__: Object.create(Port.prototype)\n};\n\nexport function FlowPort(id, dir, brick) {\n  Port.call(this, { id, dir, brick, type: 'flow' });\n\n  this._maxcon = 1;\n\n  this._el.setAttribute('fill', '#2549e4');\n\n  var opts = { fill: '#2549e4' };\n\n  return this;\n}\n\nFlowPort.prototype = {\n  __proto__: Object.create(Port.prototype)\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ports.js\n **/","//import Sticky from './Sticky.js';\n\nexport default function Port({ id, type, dir, brick }) {\n  if (['in','out'].indexOf(dir) == -1) throw \"port direction must be 'in' or 'out'\";\n  if (['data','flow'].indexOf(type) == -1) throw \"type must be 'data' or 'flow'\";\n  // var attrs = { width: 30, height: 30, fill: '#B8D430', stroke: 'black', 'stroke-width': 3 };\n  var attrs = { r: 10, fill: '#B8D430', stroke: 'black', 'stroke-width': 3.5 };\n\n  // Object.assign(attrs, { wrapper: this, type: 'port', dir: dir });\n  this._el = Sticky.createElement('circle', attrs);\n  this._el.wrapper = this;\n  this._el.type = 'port';\n  this._el.dir = dir;\n\n  this._brick = brick;\n  this._maxcon = 2;\n  this._conn = [];\n  this.id = id;\n  this.type = type;\n  this.dir = dir; //dir -> direction, not directory\n\n  return this;\n}\n\nPort.prototype = {\n  get x () { return this.attr('cx') *1; }, //force coercion to number\n  get y () { return this.attr('cy') *1; },\n  get available () { return this._conn.length < this._maxcon; },\n  attr(key, value) {\n    if(value) return this._el.setAttribute(key, value);\n    else return this._el.getAttribute(key);\n  },\n  value() {\n    this._brick.getValue();\n    // this.wrapper.getValue(this._id);\n  },\n  getPoint() {\n    return { x: this._brick.x + this.x, y: this._brick.y + this.y };\n  },\n  attach(to) {\n    if(this.canAttach(to)) {\n      this._conn.push({ brick: to._brick._id, id: to.id });\n      to._conn.push({ brick: this._brick._id, id: this.id });\n      // console.log(this, to);\n      return true;\n    }\n    return false;\n  },\n  dettach(to) {\n    let index1 = this._conn.indexOf({ brick: to._brick._id, id: to.id });\n    let index2 = this._conn.indexOf({ brick: this._brick._id, id: this.id });\n    this._conn.splice(index1, 1);\n    to._conn.splice(index2, 1);\n\n  },\n  canAttach(to) {\n    return (this.available && to.available && this.type === to.type) ? true : false;\n  }\n};\n\n// module.exports = Port;\n\n\n\n/** WEBPACK FOOTER **\n ** Port.js\n **/","//import Sticky from './Sticky.js';\n\n// function SVGBuilder({ strokeWidth, marginLeft, width, opacity, height, rx, ry, fill, stroke, ...rest }) {\nexport default function blockBuilder({ strokeWidth, marginLeft, width, opacity, height, rx, ry, fill, stroke, title }) {\n// { strokeWidth = 3, marginLeft = 10, width = 150, opacity = 1, height = 50, rx = 20, ry = 20, fill = '#1F8244', stroke = '#000000' }\n    strokeWidth = strokeWidth || 3;\n    marginLeft = marginLeft || 10;\n    width = width || 150;\n    opacity = opacity || 1;\n    height = height || 50;\n    rx = rx || 20;\n    ry = ry || 20;\n    fill = fill || '#1F8244';\n    stroke = '#000000';\n\n    var svg = Sticky.createElement('svg');\n\n    var attrs = {\n      x: marginLeft + strokeWidth/2,\n      y: strokeWidth/2,\n      width,\n      height,\n      rx,\n      ry,\n      'stroke-width': strokeWidth,\n      style: 'fill: ' + fill + '; stroke: ' + stroke + '; opacity: ' + opacity,\n      id: 'main'\n    };\n\n    var rect = Sticky.createElement('rect', attrs);\n    rect.type = 'block';\n    var text = Sticky.createElement('text', { x: 25, y: 30, style: 'cursor: default' });\n    text.type = 'title';\n    var txtNode = document.createTextNode(title);\n    text.appendChild(txtNode);\n\n    svg.appendChild(rect);\n    svg.appendChild(text);\n    return svg;\n}\n\n\nblockBuilder.prototype = {\n\n};\n\n      let test = {\n  fill: '#31dfaf',\n  border: '#e695bf',\n  ports: { data_in: 0, data_out: 0, flow_in: 1, flow_out: 1 },\n  title: 'Test Block',\n  icon: 'img/icon.png',\n  gui: [\n    { type: 'select', options: ['USA', 'BR', 'CND'] },\n    { type: 'text' },\n    { type: 'number' }\n  ],\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** blockBuilder.js\n **/"],"sourceRoot":""}
<!DOCTYPE html>
<html>
  <head>
    <title>Sticky.js example - Alert</title>
    <link href="/themes/default.css" rel="stylesheet">
    <style>
    .svg-container {
      /*height: auto;*/
      /*display: inline-block;*/
      /*width: ;*/
      /*height: 500px;*/
    }

    .sticky-block {
      stroke: black;
      cursor: move;
    }
    .sticky-block:hover {
      stroke: red;
    }

    .sticky-gui {
      width: 200px;

    }
    .sticky-gui body {
      margin: 0;
    }

    .sticky-gui label {
      display: flex;
    }

    .sticky-gui input, select {
      width: 60%;
      display: inline-block;
    }

    </style>
    <script src="/webpack-dev-server.js"></script>
    <script src="/sticky.js"></script>
  </head>
  <body>
    <div id="container">
      <div id="test"></div>
      <ul class="button-list">
        <li><button id="run" type="button">run</button></li>
        <li><button id="load" type="button">load</button></li>
      </ul>
    </div>

    <script>
      var canvas = new Sticky('test');

      var rect1 = canvas.createBlock('Source');
      var rect2 = canvas.createBlock('Source');
      var rect3 = canvas.createBlock('Alert');
      var rect4 = canvas.createBlock('Sum');
      var rect5 = canvas.createBlock('Comparison');
      var rect6 = canvas.createBlock('If');

      rect1.x = 130; rect1.y = 230;
      rect2.x = 330; rect2.y = 200;
      rect3.x = 330; rect3.y = 100;
      rect4.x = 130; rect4.y = 300;

      canvas.addObj(rect1);
      canvas.addObj(rect2);
      canvas.addObj(rect3);
      canvas.addObj(rect4);
      canvas.addObj(rect5);
      canvas.addObj(rect6);

      document.getElementById('run').onclick = function() {
        canvas.run();
      };


      document.getElementById('load').onclick = function() {
        canvas.clearCanvas(false);
        canvas.loadJSON(flowJSON);
      };

      const flowJSON = [
        {
          "refBlock": "start",
          "id": 0,
          "x": 10,
          "y": 0,
          "ports": {
            "in": [],
            "out": [],
            "flow_in": [],
            "flow_out": [
              [
                {
                  "brick": 6,
                  "id": 0
                }
              ]
            ]
          }
        },
        {
          "refBlock": "Source",
          "id": 1,
          "x": 16,
          "y": 477,
          "ports": {
            "in": [],
            "out": [
              [
                {
                  "brick": 5,
                  "id": 1
                }
              ]
            ],
            "flow_in": [],
            "flow_out": []
          }
        },
        {
          "refBlock": "Source",
          "id": 2,
          "x": -6,
          "y": 248,
          "ports": {
            "in": [],
            "out": [
              [
                {
                  "brick": 4,
                  "id": 0
                },
                {
                  "brick": 4,
                  "id": 1
                }
              ]
            ],
            "flow_in": [],
            "flow_out": []
          }
        },
        {
          "refBlock": "Alert",
          "id": 3,
          "x": 519,
          "y": 210,
          "ports": {
            "in": [
              [
                {
                  "brick": 5,
                  "id": 0
                }
              ]
            ],
            "out": [],
            "flow_in": [
              [
                {
                  "brick": 6,
                  "id": 0
                }
              ]
            ],
            "flow_out": [
              []
            ]
          }
        },
        {
          "refBlock": "Sum",
          "id": 4,
          "x": 163,
          "y": 375,
          "ports": {
            "in": [
              [
                {
                  "brick": 2,
                  "id": 0
                }
              ],
              [
                {
                  "brick": 2,
                  "id": 0
                }
              ]
            ],
            "out": [
              [
                {
                  "brick": 5,
                  "id": 0
                }
              ]
            ],
            "flow_in": [],
            "flow_out": []
          }
        },
        {
          "refBlock": "Comparison",
          "id": 5,
          "x": 399,
          "y": 489,
          "ports": {
            "in": [
              [
                {
                  "brick": 4,
                  "id": 0
                }
              ],
              [
                {
                  "brick": 1,
                  "id": 0
                }
              ]
            ],
            "out": [
              [
                {
                  "brick": 3,
                  "id": 0
                },
                {
                  "brick": 6,
                  "id": 0
                }
              ]
            ],
            "flow_in": [],
            "flow_out": []
          }
        },
        {
          "refBlock": "If",
          "id": 6,
          "x": 215,
          "y": 89,
          "ports": {
            "in": [
              [
                {
                  "brick": 5,
                  "id": 0
                }
              ]
            ],
            "out": [],
            "flow_in": [
              [
                {
                  "brick": 0,
                  "id": 0
                }
              ]
            ],
            "flow_out": [
              [
                {
                  "brick": 3,
                  "id": 0
                }
              ],
              []
            ]
          }
        }
      ];
    </script>
  </body>
</html>

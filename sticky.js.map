{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 453a9d4050446b8f8d4a","webpack:///./src/Sticky.js","webpack:///./src/Wire.js","webpack:///./src/utils.js","webpack:///./src/Brick.js","webpack:///./src/ports.js","webpack:///./src/Port.js","webpack:///./src/blockBuilder.js"],"names":[],"mappings":"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","file":"sticky.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Sticky\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Sticky\"] = factory();\n\telse\n\t\troot[\"Sticky\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 453a9d4050446b8f8d4a\n **/","import Wire from './Wire.js';\nimport Brick from './Brick.js';\n\nexport default class Sticky {\n  constructor(id) {\n    this.el = document.getElementById(id);\n\n    if (!this.el)\n      throw \"Couldn't find element :(\";\n\n    const svg = Sticky.createElement('svg', { class: 'svg-content', viewBox: \"0 0 800 600\", preserveAspectRatio: \"xMidYMid meet\" });\n    // let svg = Sticky.createElement('svg', { class: 'svg-content', width: 800, height: 400 });\n    this._uid = 0;\n    this._aux = {};\n    this.blocks = {};\n    this._objects = [];\n    this._wires = [];\n    this._state = null;\n\n    let lastDownTarget;\n\n    svg.addEventListener('mousedown', e => {\n      normalizeEvent(e);\n      // lastDownTarget = svg;\n      this.lastSelected = null;\n\n      if (e.target.type === 'wire') {\n        this.lastSelected = e.target.wrapper;\n        return this.selectedWire = e.target.wrapper;\n      }\n\n      if (e.target.type === 'port' && e.target.dir === 'out') {\n        return this.startAttach(e.target);\n      }\n\n      if (e.target.type === 'block' || e.target.type === 'title') {\n        this.lastSelected = e.target.parentNode.wrapper;\n        this.dragging = e.target.parentNode;\n        var wrapper = this.dragging.wrapper;\n        var SVGbox = wrapper._svg.getBoundingClientRect();\n        var OffsetX = e.x - SVGbox.left;\n        var OffsetY =  e.y - SVGbox.top;\n        this._aux.mouseDown = { x: OffsetX - wrapper.x, y: OffsetY - wrapper.y };\n        this._svg.appendChild(this.dragging);\n        wrapper.wires.forEach(wire => this._svg.appendChild(wire._el));\n      }\n\n    }, false);\n\n\n    document.addEventListener('mousedown', e => {\n      // lastDownTarget = e.target;\n      // console.log(lastDownTarget);\n    }, false);\n\n    document.addEventListener('keydown', e => {\n      // if (lastDownTarget == svg) {\n      if (e.keyCode == 46) {\n        console.log(this.lastSelected);\n        this.lastSelected.delete();\n      }\n    }, false);\n\n    svg.addEventListener('keydown', e => {\n      console.log(e);\n    }, false);\n\n    svg.addEventListener('mouseup', e => {\n      this.dragging = null;\n      if(e.target.type === 'port')\n        return this.endAttach(e.target);\n\n      if(this.isState('attaching')) {\n        this.setState(null)\n        svg.removeChild(this._aux['wire']._el);\n      }\n    });\n\n    svg.addEventListener('mousemove', e => {\n      normalizeEvent(e);\n\n      return this.attachMove(e);\n    });\n\n    svg.addEventListener('mousemove', e => {\n      normalizeEvent(e);\n\n      if (this.dragging) {\n        var wrapper = this.dragging.wrapper;\n        var SVGbox = wrapper._svg.getBoundingClientRect();\n        var OffsetX = e.x - SVGbox.left;\n        var OffsetY =  e.y - SVGbox.top;\n\n        var firstState = this._aux.mouseDown;\n        wrapper.x = OffsetX - firstState.x;\n        wrapper.y = OffsetY - firstState.y;\n        wrapper.updateWires();\n      }\n    });\n\n    this._svg = svg;\n    this.el.appendChild(this._svg);\n    this.matchViewBox();\n\n    // this.registerBlock('actuator', ActuatorBrick);\n\n    this.clearCanvas();\n\n    this.colors = [\"#B8D430\", \"#3AB745\", \"#029990\", \"#3501CB\",\n                   \"#2E2C75\", \"#673A7E\", \"#CC0071\", \"#F80120\",\n                   \"#F35B20\", \"#FB9A00\", \"#FFCC00\", \"#FEF200\"];\n\n    return this;\n  }\n\n//static methods\n  static createElement(name, attrs) {\n    var el = document.createElementNS('http://www.w3.org/2000/svg', name);\n\n    for (let key in attrs)\n      el.setAttribute(key, attrs[key]);\n\n    return el;\n  }\n\n  matchViewBox() {\n    const { width, height } = this._svg.getBoundingClientRect();\n\n    this._svg.setAttribute('viewBox', `0, 0, ${width} ${height}`);\n  }\n  Brick(name, attrs) {\n    var el = Sticky.createElement(name, attrs);\n    var brick = new Brick(el, this);\n    brick._id = this._uid++;\n    this._objects.push(brick);\n\n    return brick;\n  }\n  addObj(obj) {\n    if (obj._id == null) obj._id = this._uid++;\n    this._objects.push(obj);\n    this.addElement(obj._el);\n  }\n  removeObj(obj, update) {\n    let index = this._objects.indexOf(obj);\n    if (index == -1) return;\n\n    for (let port_type of Object.keys(obj._ports)) {\n      if (obj._ports[port_type][0]) { // if there's any connection\n        for (let port of obj._ports[port_type]) {\n          // port.dettach();\n        }\n      }\n    }\n\n    for (let wire of obj.wires) {\n      wire.delete();\n    }\n\n    this.removeElement(obj._el);\n    if (update)\n      return this._objects.splice(index, 1);\n  }\n  addElement(el) {\n    this._svg.appendChild(el);\n  }\n  removeElement(el) {\n    this._svg.removeChild(el);\n  }\n  startAttach(port) {\n    let wire = new Wire(port.wrapper);\n    wire._inverted = port.wrapper.dir === 'in';\n    this.setState('attaching');\n    this._aux['wire'] = wire;\n    this.addElement(wire._el);\n  }\n  startDrag(port) {\n    this.setState('attaching');\n    this._aux['wire'] = wire;\n    this.addElement(wire._el);\n  }\n  endAttach(port) {\n    if (this.isState('attaching')) {\n      this.setState(null);\n      var wire = this._aux['wire'];\n      wire._cp2 = port.wrapper;\n\n      if (wire.seal()) {\n        wire.render();\n        this._wires.push(wire);\n      } else {\n        this.removeElement(wire._el);\n      }\n      delete this._aux['wire'];\n    }\n  }\n  setState(state) {\n    return this._state = state;\n  }\n  isState(state) {\n    return this._state === state;\n  }\n  attachMove(mouse) {\n    if (this.isState('attaching')) {\n      var wire = this._aux['wire'];\n      var SVGbox = this._svg.getBoundingClientRect();\n      //(below) pixel for removing the wire from the way so we can detect the event on port\n      var offset = wire._inverted ? 1 : -1;\n      var mouse = { x: mouse.x - SVGbox.left + offset, y: mouse.y - SVGbox.top };\n      var port = wire._cp1.getPoint();\n\n      wire._render(port, mouse, wire._inverted);\n    }\n  }\n  clearCanvas(start = true) {\n    for (let obj of this._objects) {\n      // this.removeElement(obj._el);\n      this.removeObj(obj, false);\n    }\n\n    this._objects = [];\n\n    if (!start) return;\n\n    var start = this.createBlock('start');\n    start.x = 10; start.y = this._svg.getAttribute('height')/2;\n    start.behavior = () => 0;\n\n    this.addObj(start);\n  }\n  registerBlock(name, obj) {\n    this.blocks[name] = {\n      ...obj,\n      id: name,\n      behavior: typeof obj.behavior !== 'function' ? new Function('findById', obj.behavior) : obj.behavior\n    }\n  }\n  static registerBlock(name, obj) {\n    this.prototype.__blocks[name] = {\n      ...obj,\n      id: name,\n      behavior: typeof obj.behavior !== 'function' ? new Function('findById', obj.behavior) : obj.behavior\n    }\n  }\n  createBlock(name, data = {}) {\n    const cfg = this.blocks[name] || this.__blocks[name];\n\n    if (!cfg) throw `Block '${name}' not registered`;\n\n    return Object.assign(new Brick(cfg), data);\n  }\n  static createBlock(name, data = {}) {\n    const cfg = this.prototype.__blocks[name];\n\n    if (!cfg) throw \"Block not registered\";\n\n    return Object.assign(new Brick(cfg), data);\n  }\n  findById(id) {\n    if (id == undefined) return null;\n    for (let obj of this._objects) {\n      if (obj._id === id) return obj;\n    }\n  }\n  toJSON() {\n    var fluxgram = this._objects.map(obj => {\n      let object = {\n        refBlock: obj._refBlock,\n        id: obj._id,\n        x: obj.x,\n        y: obj.y,\n        ports: {} // flow_in, flow_out, in, out\n      };\n\n      for (let type in obj._ports) {\n        console.log(type, obj._ports[type]);\n        object.ports[type] = obj._ports[type].map(port => [...port._conn]);\n      }\n\n      return object;\n    });\n\n    // var refBlock = this._blocks.map(block => ({\n    //   // ...block,\n    //   behavior: block.behavior.toString\n    // }));\n\n    let refBlock = {};\n\n    return { refBlock, fluxgram };\n  }\n  loadJSON(data) {\n    this.clearCanvas(false);\n\n    for (let block of data) {\n      let refBlock = this._blocks[block.refBlock];\n      let obj = this.createBlock(block.refBlock, refBlock);\n      obj.x = block.x;\n      obj.y = block.y;\n      obj.value = block.value;\n      obj._id = block.id;\n      console.log(block.id, obj._id);\n      this.addObj(obj);\n    }\n\n    // load wires\n    // PLEASE REFACTORATE ME\n\n    for (let block of data) {\n      let blocky = this.findById(block.id);\n      console.log(blocky, block.id);\n\n      for (let port of block.ports.out) {\n        if (!port[0]) {\n          console.log('end of flux');\n          break;\n        }\n        let blocky2 = this.findById(port[0].brick);\n        let wire = new Wire(blocky._ports['out'][0], blocky2._ports['in'][port[0].id]);\n        this.addElement(wire._el);\n        if (wire.seal()) {\n          wire.render();\n          this._wires.push(wire);\n        } else {\n          this.removeElement(wire._el);\n        }\n      }\n\n      for (let port of block.ports.flow_out) {\n        console.log(port);\n        if (!port[0]) {\n          console.log('end of flux');\n          break;\n        }\n        let blocky2 = this.findById(port[0].brick);\n        let wire = new Wire(blocky._ports['flow_out'][0], blocky2._ports['flow_in'][0]);\n        this.addElement(wire._el);\n\n        if (wire.seal()) {\n          wire.render();\n          this._wires.push(wire);\n        } else {\n          this.removeElement(wire._el);\n        }\n      }\n\n    }\n  }\n  run() {\n    let block = this._objects[0], flow, id, refBlock;\n    console.log(block);\n\n    // flow = start.behavior();\n    // an ActuatorBrick should return the flow_out port id\n    // it'll be useful for if block\n\n    do {\n      refBlock = this.blocks[block._refBlock] || this.__blocks[block._refBlock];\n      flow = refBlock.behavior.call(block, this.findById.bind(this));\n      // console.log(block._ports);\n      id = (block._ports['flow_out'][flow]._conn[0]) ?\n            (block._ports['flow_out'][flow]._conn[0]).brick :\n              null;\n      block = this.findById(id);\n      console.log(refBlock, flow, block);\n    } while(block);\n  }\n  compile() {\n\n  }\n}\n\nSticky.prototype.__blocks = {\n  'start': {\n    id: 'start',\n    width: 35,\n    height: 60,\n    rx: 10,\n    ry: 10,\n    fill: '#AF2B37',\n    ports: { data_in: 0, data_out: 0, flow_in: 0, flow_out: 1 },\n    title: '',\n    icon: 'img/icon.png',\n    behavior: () => 0\n  },\n  'Source': {\n    id: 'Source',\n    fill: '#4fec2f',\n    ports: { data_in: 0, data_out: 1, flow_in: 0, flow_out: 0 },\n    title: 'Source Block',\n    gui: {\n      number: { label: 'Number', type: 'number' }\n    },\n    behavior: function() {\n      return [this.inputs.number];\n    }\n  },\n  'Comparison': {\n    id: 'Comparison',\n    fill: '#4fec2f',\n    ports: { data_in: 2, data_out: 1, flow_in: 0, flow_out: 0 },\n    title: 'Comparison Block',\n    gui: {\n      op: { label: 'Operation', type: 'select', options: ['==', '!=', '===', '!==', '>', '>=', '<', '<='] },\n    },\n    behavior: function(findById) {\n      const conn1 = (this._ports['in'][0]._conn[0]);\n      const conn2 = (this._ports['in'][1]._conn[0]);\n      const brick1 = findById(conn1.brick);\n      const brick2 = findById(conn2.brick);\n      const val1 = brick1.behavior(findById)[conn1.id];\n      const val2 = brick2.behavior(findById)[conn2.id];\n\n      return [eval(`${val1} ${this.inputs.op} ${val2}`)];\n    }\n  },\n  'Alert': {\n    id: 'Alert',\n    fill: '#EC962F',\n    ports: { data_in: 1, data_out: 0, flow_in: 1, flow_out: 1 },\n    title: 'Alert Block',\n    behavior: function(findById) {\n      const conn = this._ports['in'][0]._conn[0];\n      const brick = findById(conn.brick);\n      const data = brick.behavior(findById)[conn.id];\n\n      alert(data);\n\n      return 0;\n    }\n  },\n  'Sum': {\n    id: 'Sum',\n    fill: '#3e67c2',\n    ports: { data_in: 2, data_out: 1, flow_in: 0, flow_out: 0 },\n    title: 'Sum Block',\n    behavior: function(findById) {\n      const conn1 = (this._ports['in'][0]._conn[0]);\n      const conn2 = (this._ports['in'][1]._conn[0]);\n      const brick1 = findById(conn1.brick);\n      const brick2 = findById(conn2.brick);\n      const val1 = brick1.behavior(findById)[conn1.id];\n      const val2 = brick2.behavior(findById)[conn2.id];\n\n      return [val1 + val2];\n    }\n  },\n  'If': {\n    id: 'If',\n    fill: '#3e67c2',\n    ports: { data_in: 1, data_out: 0, flow_in: 1, flow_out: 2 },\n    title: 'If Block',\n    behavior: function(findById) {\n      const conn = this._ports['in'][0]._conn[0];\n      const brick = findById(conn.brick);\n      const data = brick.behavior(findById)[conn.id];\n\n      return data ? 0 : 1;\n    }\n  },\n};\n\n\nconst normalizeEvent = e => {\n  if (e.x == undefined) e.x = e.clientX;\n  if (e.y == undefined) e.y = e.clientY;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Sticky.js\n **/","import createElement from './utils.js';\n\nexport default function Wire(p1, p2) {\n  this._el = createElement('path', { stroke: 'red', 'stroke-width': 6, fill: 'none', opacity: 0.8 });\n  this._el.type = 'wire';\n  this._el.wrapper = this;\n  this._cp1 = p1;\n  this._cp2 = p2;\n  this._inverted = false;\n  this._behavior = undefined;\n\n  return this;\n}\n\n//static methods\n\nWire.describeJoint = (x1, y1, x2, y2, offset) =>\n  [ \"M\", x1, y1,\n    \"C\", x1 + offset, y1, x2 - offset, y2, x2, y2\n  ].join(\" \");\n\nWire.dt2p = (x1, y1, x2, y2) => Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n\nWire.prototype = {\n  _render(p1, p2, inv) {\n    inv = inv ? -1 : 1;\n    var offset = Wire.dt2p(p1.x, p1.y, p2.x, p2.y)/2;\n    var d = Wire.describeJoint(p1.x, p1.y, p2.x, p2.y, offset*inv);\n    this._el.setAttribute('d', d);\n  },\n  seal() {\n    if(this._cp1.dir == this._cp2.dir) return false;\n    var wrapper1 = this._cp1._brick;\n    var wrapper2 = this._cp2._brick;\n\n    if(this._cp1.attach(this._cp2)) {\n      wrapper1.wires.push(this);\n      wrapper2.wires.push(this);\n      return true;\n    } else {\n      return false;\n    }\n\n  },\n  delete() {\n    var wrapper1 = this._cp1._brick;\n    var wrapper2 = this._cp2._brick;\n    spliceByIndex(wrapper1.wires, this);\n    spliceByIndex(wrapper2.wires, this);\n    this._cp1.dettach(this._cp2);\n    this._el.parentNode.removeChild(this._el);\n  },\n  render() {\n    this._render(this._cp1.getPoint(), this._cp2.getPoint(), this._inverted);\n  }\n\n};\n\n\nfunction spliceByIndex(arr, obj) {\n  let index = arr.indexOf(obj);\n\n  if (index != -1) {\n    arr.splice(index, 1);\n    return true;\n  }\n  return false;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Wire.js\n **/","export default function createElement(name, attrs) {\n  var el = document.createElementNS('http://www.w3.org/2000/svg', name);\n\n  for (let key in attrs) el.setAttribute(key, attrs[key]);\n\n  return el;\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/","import { DataPort, FlowPort } from './ports.js';\nimport blockBuilder from './blockBuilder.js';\n\nexport default function Brick(custom = {}) {\n  const cfg = {\n    strokeWidth: 3,\n    marginLeft: 10,\n    width: 220,\n    opacity: 1,\n    height: 50,\n    rx: 20,\n    ry: 20,\n    fill: '#1F8244',\n    stroke: '#000000',\n    gui: {},\n    ...custom\n  };\n\n  const { behavior, title, ports, icon, gui, id, x, y } = cfg;\n\n  // this._id = id;\n  this.inputs = {};\n  this._el = blockBuilder(this, cfg);\n  this.behavior = behavior;\n  this._container = null;\n  this._refBlock = id;\n  this.x = x || 0;\n  this.y = y || 0;\n\n\n  this._ports = {\n    in: [],\n    out: []\n  };\n\n  this.wires = [];\n\n  this._aux = { attaching: {} };\n  this._states = { dragging: false };\n\n  arrangePorts.call(this, ports, gui);\n\n  return this;\n}\n\nBrick.prototype = {\n  get data () { return this.behavior(); },\n  get main() { return this._el.getElementById('main'); },\n  get _svg() { return getSvg(this._el); },\n  get x () { return this._el.getAttribute('x') * 1; }, // multiply by one just to convert from string to number\n  get y () { return this._el.getAttribute('y') * 1; }, //\n  get text () { return this._el.innerHTML; },\n  set x (val) { return this._el.setAttribute('x', val); },\n  set y (val) { return this._el.setAttribute('y', val); },\n  set text (val) { return (this._el.innerHTML = val); },\n\n  attr(key, value) {\n    if (value) return this._el.setAttribute(key, value);\n    else if (key) return this._el.getAttribute(key);\n  },\n  detach() {\n    this._el.parentNode.removeChild(this._el);\n    return this;\n  },\n  arrangePorts() {\n\n  },\n  delete() {\n    for (let i = this.wires.length - 1; i >= 0; i--)\n      this.wires[i].delete();\n\n    this.detach();\n  },\n  updateWires() {\n    this.wires.forEach( wire => wire.render() );\n  },\n  getValue(id) {\n    // var args = this._\n    var args = [];\n    var In = this._ports.in;\n\n    for (let i = 0; i < In.length; i++) {\n      args.push([]);\n      for (let j = 0; j < In[i].length; j++)\n        args[i].push(In[i][j].value());\n    }\n\n    if (id) return (this._behavior(args))[id];\n    else    return this._behavior(args);\n  }\n};\n\nfunction getSvg(el) {\n  if(el.parentNode.nodeName === 'svg') {\n    return el.parentNode;\n  }\n  return getSvg(el.parentNode);\n}\n\nfunction arrangePorts({ data_in = 1, data_out = 1, flow_in = 1, flow_out = 1 } = {}, gui = {}) {\n  var radius = 10;\n  var dist = 10; //distance beetween ports\n  var strokeWidth = 3.5;\n  var ports = this._ports;\n  var main = this.main;\n  // var rectBox = main.getBBox ? main.getBBox() : main.getBoundingClientRect();\n  var rectBox =  main.getBoundingClientRect();\n  var maxPorts = Math.max(data_in + flow_in, data_out + flow_out);\n  // var maxPorts = Math.max(ports.in.length, ports.out.length);\n  var Radius = radius + strokeWidth/2; //total radius -> circle radius plus its stroke width\n  var tRadius = dist + Radius;\n  var height = (dist + Radius * 2) * Math.max(maxPorts, 1 + Object.keys(gui).length) + dist; //dist + diameter * number of ports + final dist\n  var width = main.getAttribute('width') * 1;\n\n  this._ports.in = [];\n  this._ports.out = [];\n  this._ports.flow_in = [];\n  this._ports.flow_out = [];\n\n  main.setAttribute('height', height);\n\n  var attrs = { id: null, r: radius, fill: '#B8D430', stroke: 'black', 'stroke-width': strokeWidth };\n  var flow_attrs = { id: null, r: radius, fill: '#2549e4', stroke: 'black', 'stroke-width': strokeWidth };\n  var i, y, ds;\n  // attrs.cx = margin; attrs.cy = rectBox.height/2;\n\n  ds = height/(data_in + flow_in);\n  y = ds/2;\n\n  for (i = 0; i < flow_in; i++, y+=ds) {\n    let port = new FlowPort(i, 'in', this);\n    port.attr('cx', Radius);\n    port.attr('cy', y);\n    ports.flow_in.push(port);\n    this._el.appendChild(port._el);\n  }\n\n  for (i = 0; i < data_in; i++, y+=ds) {\n    let port = new DataPort(i, 'in', this);\n    port.attr('cx', Radius);\n    port.attr('cy', y);\n    ports.in.push(port);\n    this._el.appendChild(port._el);\n  }\n\n  ds = height/(data_out + flow_out);\n  y = ds/2; //initially get half the distance cuz we drawin a circle, then we increment by the total distance\n            //cuz it means the missing half for the current circle and the initial half for the next circle\n            //so every 'y' means one center of circle\n  for (i = 0; i < flow_out; i++, y+=ds) {\n    let port = new FlowPort(i, 'out', this);\n    port.attr('cx', width + Radius);\n    port.attr('cy', y);\n    ports.flow_out.push(port);\n    this._el.appendChild(port._el);\n  }\n\n  for (i = 0; i < data_out; i++, y+=ds) {\n    let port = new DataPort(i, 'out', this);\n    port.attr('cx', width + Radius);\n    port.attr('cy', y);\n    ports.out.push(port);\n    this._el.appendChild(port._el);\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Brick.js\n **/","import Port from './Port.js';\n\nexport function DataPort(id, dir, brick) {\n  Port.call(this, { id, dir, brick, type: 'data' });\n\n  var opts = { fill: '#B8D43' };\n\n  return this;\n}\n\nDataPort.prototype = {\n  __proto__: Object.create(Port.prototype)\n};\n\nexport function FlowPort(id, dir, brick) {\n  Port.call(this, { id, dir, brick, type: 'flow' });\n\n  this._maxcon = 1;\n\n  this._el.setAttribute('fill', '#2549e4');\n\n  var opts = { fill: '#2549e4' };\n\n  return this;\n}\n\nFlowPort.prototype = {\n  __proto__: Object.create(Port.prototype)\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ports.js\n **/","import createElement from './utils.js';\n\nexport default function Port({ id, type, dir, brick }) {\n  if (['in','out'].indexOf(dir) == -1) throw \"port direction must be 'in' or 'out'\";\n  if (['data','flow'].indexOf(type) == -1) throw \"type must be 'data' or 'flow'\";\n  // var attrs = { width: 30, height: 30, fill: '#B8D430', stroke: 'black', 'stroke-width': 3 };\n  var attrs = { r: 10, fill: '#B8D430', stroke: 'black', 'stroke-width': 3.5 };\n\n  // Object.assign(attrs, { wrapper: this, type: 'port', dir: dir });\n  this._el = createElement('circle', attrs);\n  this._el.wrapper = this;\n  this._el.type = 'port';\n  this._el.dir = dir;\n\n  this._brick = brick;\n  this._maxcon = 2;\n  this._conn = [];\n  this.id = id;\n  this.type = type;\n  this.dir = dir; //dir -> direction, not directory\n\n  return this;\n}\n\nPort.prototype = {\n  get x () { return this.attr('cx') *1; }, //force coercion to number\n  get y () { return this.attr('cy') *1; },\n  get available () { return this._conn.length < this._maxcon; },\n  attr(key, value) {\n    if(value) return this._el.setAttribute(key, value);\n    else return this._el.getAttribute(key);\n  },\n  value() {\n    this._brick.getValue();\n    // this.wrapper.getValue(this._id);\n  },\n  getPoint() {\n    return { x: this._brick.x + this.x, y: this._brick.y + this.y };\n  },\n  attach(to) {\n    if(this.canAttach(to)) {\n      this._conn.push({ brick: to._brick._id, id: to.id });\n      to._conn.push({ brick: this._brick._id, id: this.id });\n      // console.log(this, to);\n      return true;\n    }\n    return false;\n  },\n  dettach(to) {\n    let index1 = this._conn.indexOf({ brick: to._brick._id, id: to.id });\n    let index2 = this._conn.indexOf({ brick: this._brick._id, id: this.id });\n    this._conn.splice(index1, 1);\n    to._conn.splice(index2, 1);\n\n  },\n  canAttach(to) {\n    return (this.available && to.available && this.type === to.type) ? true : false;\n  }\n};\n\n// module.exports = Port;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Port.js\n **/","import createElement from './utils.js';\n\n// function SVGBuilder({ strokeWidth, marginLeft, width, opacity, height, rx, ry, fill, stroke, ...rest }) {\nexport default function blockBuilder(wrapper, cfg) {\n  const { strokeWidth, marginLeft, width, opacity, height, rx, ry, fill, stroke, title, gui } = cfg;\n  // { strokeWidth = 3, marginLeft = 10, width = 150, opacity = 1, height = 50, rx = 20, ry = 20, fill = '#1F8244', stroke = '#000000' }\n  var svg = createElement('svg');\n  svg.wrapper = wrapper;\n\n  var attrs = {\n    x: marginLeft + strokeWidth/2,\n    y: strokeWidth/2,\n    width,\n    height: height + Object.keys(gui).length * 25,\n    rx,\n    ry,\n    'stroke-width': strokeWidth,\n    style: `fill: ${fill}; stroke: ${stroke}; opacity: ${opacity};`,\n    class: 'sticky-block',\n    id: 'main'\n  }\n\n  var rect = createElement('rect', attrs);\n  rect.type = 'block';\n  var text = createElement('text', { x: 25, y: 30, style: 'cursor: default' });\n  text.type = 'title';\n  var txtNode = document.createTextNode(title);\n  text.appendChild(txtNode);\n\n  svg.appendChild(rect);\n  svg.appendChild(text);\n\n  const foreign = createElement('foreignObject', { class: 'sticky-gui', x: 25, y: 40, width: 120 });\n  const body = document.createElement('body');\n  body.xmlns = 'http://www.w3.org/1999/xhtml';\n  // body.style.margin = '0';\n\n  Object.keys(gui).forEach(input => {\n    let label;\n    const obj = gui[input];\n    const _id = v => v;\n    const createHandler = (f = _id)  => e => {\n      svg.wrapper.inputs[input] = f(e.target.value);\n    };\n\n    switch (obj.type) {\n      case 'number': {\n        label = createLabel(obj.label, obj.type, createHandler(Number));\n      } break;\n      case 'text': {\n        label = createLabel(obj.label, obj.type, createHandler());\n      } break;\n      case 'select': {\n        label = createSelect(obj.label, obj.options, createHandler());\n      } break;\n    }\n\n    body.appendChild(label);\n  });\n\n  foreign.appendChild(body);\n  svg.appendChild(foreign);\n\n  return svg;\n}\n\nconst example = {\n  fill: '#31dfaf',\n  border: '#e695bf',\n  ports: { data_in: 0, data_out: 0, flow_in: 1, flow_out: 1 },\n  title: 'Example Block',\n  icon: 'img/icon.png',\n  gui: {\n    select: { label: 'Select', type: 'select', options: ['USA', 'BR', 'CND'] },\n    text: { label: 'Text', type: 'text' },\n    number: { label: 'Number', type: 'number' }\n  },\n};\n\nconst createLabel = (_label, type, onChange) => {\n  const label = document.createElement('label');\n  const txt = document.createTextNode(`${_label}: `);\n  const input = document.createElement('input');\n  input.type = type;\n\n  input.addEventListener('change', onChange);\n  onChange({ target: input });\n  // input.style.width = '100%';\n\n  label.appendChild(txt);\n  label.appendChild(input);\n\n  return label;\n};\n\nconst createSelect = (_label, options, onChange) => {\n  const label = document.createElement('label');\n  const txt = document.createTextNode(`${_label}: `);\n  const select = document.createElement('select');\n\n\n  options.forEach(value => {\n    const option = document.createElement('option');\n    option.value = option.text = value;\n\n    select.add(option, null);\n  });\n\n  select.addEventListener('change', onChange);\n  onChange({ target: select });\n  // input.style.width = '100%';\n\n  label.appendChild(txt);\n  label.appendChild(select);\n\n  return label;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/blockBuilder.js\n **/"],"sourceRoot":""}